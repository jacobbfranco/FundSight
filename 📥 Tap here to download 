
import streamlit as st
import pandas as pd
import openai

st.set_page_config(page_title="Habitat Finance AI", layout="wide")
st.title("Habitat for Humanity Finance Insights")

# File uploader
uploaded_file = st.file_uploader("Upload QuickBooks CSV Export", type=["csv"])
if uploaded_file:
    df = pd.read_csv(uploaded_file)
    st.subheader("Data Preview")
    st.dataframe(df.head())

    # Example basic financial insight
    if st.button("Generate AI Insights"):
        total_income = df[df['Amount'] > 0]['Amount'].sum()
        total_expense = df[df['Amount'] < 0]['Amount'].sum()
        cash_flow = total_income + total_expense

        st.write(f"ðŸŸ¢ Total Income: ${total_income:,.2f}")
        st.write(f"ðŸ”´ Total Expenses: ${total_expense:,.2f}")
        st.write(f"ðŸ’° Net Cash Flow: ${cash_flow:,.2f}")

        # Simulate AI output
        st.markdown("### ðŸ¤– AI Insight")
        st.info(f"""
Based on your uploaded data, your current cash flow is ${cash_flow:,.2f}.
If your expenses continue at this rate, you may need to evaluate your cash runway
for the next quarter, especially in relation to restricted funds and project timelines.
""")

# Footer
st.markdown("---")
st.caption("Powered by Streamlit + OpenAI | Habitat for Humanity AI Finance MVP")
